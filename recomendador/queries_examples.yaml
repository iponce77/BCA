version: 1
alpha: 0.6  # peso del margen en el score (0..1). La rotación pesa (1 - alpha).

# Filtros globales (se aplican a TODAS las consultas). Si no quieres alguno, cambia los valores.
global_filters:
  margin_cap_ratio: 0.5          # margin_abs <= margin_cap_ratio * precio_final_eur
  sold_only: true                # lot_status debe indicar vendidos (sold/sale ended/closed/vendido)
  max_year_gap: 3                # |year_bca - anio_ganvam| <= 3
  fuel_exclude: []               # excluye combustibles en todas las consultas

# Sensores de demanda: "foto" del mercado (cuánto se mueve y qué marcas pesan)
demand:
  use_brand_share: true          # usa share_marca_%_{region} (normalizado a 0..1)
  use_units_abs: true            # usa units_abs_{region} (normalizado a 0..1)
  use_concentration_penalty: false  # si true, penaliza alta dominancia de un solo modelo en la marca
  weight_brand_share: 0.5        # pesos relativos entre señales (suman libre; internamente re-normalizamos)
  weight_units_abs: 0.5
  weight_concentration: 0.0

# Lista de consultas. Puedes duplicar/editar las que quieras.
queries:

  - name: "Amigo - <10k automatico <8 años (beneficio + rotación, ESP)"
    region: esp
    filters:
      max_age_years: 8
      max_price: 10000
    prefer_fast: true
    ignore_rotation: false
    brand_only: false
    top_n: 19

  - name: "Amigo - <10k automatico <8 años (máximo margen, ESP)"
    region: esp
    filters:
      max_age_years: 8
      max_price: 10000
      transmission: automatic
    prefer_fast: false
    ignore_rotation: true
    brand_only: false
    top_n: 19
