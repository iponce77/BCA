version: 1
alpha: 0.6  # peso del margen en el score (0..1). La rotación pesa (1 - alpha).

# Filtros globales (se aplican a TODAS las consultas)
global_filters:
  margin_cap_ratio: 0.5
  sold_only: true
  max_year_gap: 3
  fuel_exclude: []

# Sensores de demanda
demand:
  use_brand_share: true
  use_units_abs: true
  use_concentration_penalty: false
  weight_brand_share: 0.2
  weight_units_abs: 0.8
  weight_concentration: 0.0

# Lista de consultas
queries:
  # ---------------- Q1 ----------------
  - name: "Q1 - Mejor subasta para BMW X1 (Top 20)"
    type: q1
    model: "X1"
    region: esp
    top_n: 20
    filters:
      min_year: 2018        # <— tu runner entiende min/max_year
      max_year: 2024
      mileage_max: 120000

  # ---------------- Q2 ----------------
  - name: "Q2 - Orden de precio dentro de BMW (vehículo óptimo por modelo)"
    type: q2
    brand: "BMW"
    region: bcn
    mode: cheapest          # cheapest = más barato por modelo_base_x; max_margin = mayor margen
    filters:
      min_year: 2020
      max_km: 100000

  # ---------------- Q3 ----------------
  - name: "Q3 - Orden de precio en segmento SUV compacto (Top 20)"
    type: q3
    segment: "JC"
    region: bcn
    top_n: 20
    filters:
      min_year: 2020
      max_year: 2025
      max_km: 100000
      # fuel: ["GASOLINA","DIESEL"]   # opcional
      
  # ---------------- Q4 ----------------
  - name: "Q4 - Atractivo Golf 2.0 TDI 2020 DIESEL (BCN)"
    type: q4
    region: bcn            # por defecto bcn, pero puedes poner cat o esp
    modelo_base: "GOLF"
    year: 2020             # opcional; si lo quitas usará el rango de filters
    fuel: "DIESEL"         # opcional; si lo quitas usa todos los fuels
    filters:
      min_year: 2020       # por defecto 2020
      max_year: 2024       # por defecto 2024
      # fuel_include: ["DIESEL","GASOLINA"]  # opcional; normalmente basta con 'fuel' arriba


  # ---------------- Consulta genérica (legacy compatible) ----------------
  - name: "GEN - Top 15 baratos BCN (<=15k, <=6 años, automáticos)"
    type: generic
    region: bcn
    top_n: 15
    filters:
      max_age_years: 6
      max_price: 15000
      # gearbox: automatic  # <— hoy no se parsea; si quieres lo soportamos en el runner
    selection: cheapest
