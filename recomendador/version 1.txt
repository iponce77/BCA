version: 1
alpha: 0.6  # peso del margen en el score (0..1). La rotación pesa (1 - alpha).

# Filtros globales (se aplican a TODAS las consultas). Si no quieres alguno, cambia los valores.
global_filters:
  margin_cap_ratio: 0.5          # margin_abs <= margin_cap_ratio * precio_final_eur
  sold_only: true                # lot_status debe indicar vendidos (sold/sale ended/closed/vendido)
  max_year_gap: 3                # |year_bca - anio_ganvam| <= 3
  fuel_exclude: []               # excluye combustibles en todas las consultas

# Sensores de demanda: "foto" del mercado (cuánto se mueve y qué marcas pesan)
demand:
  use_brand_share: true          # usa share_marca_%_{region} (normalizado a 0..1)
  use_units_abs: true            # usa units_abs_{region} (normalizado a 0..1)
  use_concentration_penalty: false  # si true, penaliza alta dominancia de un solo modelo en la marca
  weight_brand_share: 0.5        # pesos relativos entre señales (suman libre; internamente re-normalizamos)
  weight_units_abs: 0.5
  weight_concentration: 0.0

# Lista de consultas. Puedes duplicar/editar las que quieras.
queries:
  - name: "Q1 - BCN <5 años y <15k (beneficio + rotación)"
    region: bcn
    filters:
      max_age_years: 5
      max_price: 15000
      fuel_include: [DIESEL]
    prefer_fast: true
    ignore_rotation: false
    brand_only: false
    top_n: 10

  - name: "Q2 - L'Hospitalet (proxy BCN): marca recomendada"
    region: bcn
    filters: {}
    prefer_fast: false
    ignore_rotation: false
    brand_only: true
    top_n: 10

  - name: "Q3 - BCN máximo margen (ignorar rotación)"
    region: bcn
    filters: {}
    prefer_fast: false
    ignore_rotation: true
    brand_only: false
    top_n: 10

  - name: "Q4 - CAT (Girona), prisa, 20k-25k"
    region: cat
    filters:
      min_price: 20000
      max_price: 25000
    prefer_fast: true
    ignore_rotation: false
    brand_only: false
    top_n: 10

  - name: "Especial - Golf 2020 precios por país y subasta"
    special:
      model: Golf
      year: 2020

  - name: "Amigo - <10k automático <8 años (beneficio + rotación, ESP)"
    region: esp
    filters:
      max_age_years: 8
      max_price: 10000
      transmission: automatic
    prefer_fast: true
    ignore_rotation: false
    brand_only: false
    top_n: 30

  - name: "Amigo - <10k automático <8 años (máximo margen, ESP)"
    region: esp
    filters:
      max_age_years: 8
      max_price: 10000
      transmission: automatic
    prefer_fast: false
    ignore_rotation: true
    brand_only: false
    top_n: 30
# T-Cross 2019
  - name: "Especial - VW T-Cross 2019 precios por pais y subasta"
    special:
      model: T-ROC
      year: 2019

# T-ROC 2020
  - name: "Especial - VW T-Cross 2020 precios por pais y subasta"
    special:
      model: T ROC
      year: 2020

# T-ROC 2021
  - name: "Especial - VW T-Cross 2021 precios por pais y subasta"
    special:
      model: T ROC
      year: 2021

# T-ROC 2022
  - name: "Especial - VW T-Cross 2022 precios por pais y subasta"
    special:
      model: T ROC
      year: 2022

# T-ROC 2023
  - name: "Especial - VW T-Cross 2023 precios por pais y subasta"
    special:
      model: T ROC
      year: 2023

# T-ROC 2024
  - name: "Especial - VW T-Cross 2024 precios por pais y subasta"
    special:
      model: T ROC
      year: 2024
